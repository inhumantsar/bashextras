#!/bin/bash

alias anacon='export PATH="/home/smartin/anaconda2/bin:$PATH"'
alias l="ls --color=auto -alh"
alias dush="du -sh *"
alias attach="screen -Adr"
alias ack="ack-grep"

coursera() {
  ssh -i ~/SpiderOak\ Hive/docs/coursera/coursera.pem ubuntu@coursera.minttingle.ca
}

# these load the ssh key as needed rather than ever damn time 
# i log the fuck in. see also: ssh-agent
ssh() {
  if ! ssh-add -l >/dev/null 2>&-; then
    ssh-add ~/.ssh/id_rsa
  fi
  /usr/bin/ssh "$@"
}
export -f ssh

git() {
  if ! ssh-add -l >/dev/null 2>&-; then
    ssh-add ~/.ssh/id_rsa
  fi
  /usr/bin/git "$@"
}
export -f git

sr() {
  if [ "$1" == "" ]; then
    echo "Usage: sr <host> <ssh opts>"
    return 1
  fi
  host="$1"
  shift
  ssh root@$host $@
}

pycompile() {
  python -m py_compile $@
}

sshloop() {
  while [[ 1 -eq 1 ]]; do sleep 3; ssh $@ && break; done
}

pynotebook() {
  if [ "$1" != "" ]; then
    d="$1"
  else
    d="$(pwd)"
  fi
  docker run --rm -it -p 8888:8888 -v "${d}":/home/jovyan/work/"$(basename $d)" -e PASSWORD=pornmuffins jupyter/minimal-notebook
}
